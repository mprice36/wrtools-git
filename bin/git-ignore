#!/bin/bash

set -o nounset -o errexit -o pipefail

git_root_dir=$(git rev-parse --show-toplevel)
git_ignore_file=$git_root_dir/.gitignore
git_ignore_file_relative=$(realpath --relative-to=. "$git_ignore_file")

for relative_path in "$@"
do git_relative_path=/$(realpath --relative-to="$git_root_dir" "$relative_path")
   printf 'Add "%s" to %s?\n' "$git_relative_path" "$git_ignore_file_relative" >&2
   PS3='? '
   select option in yes no quit
   do case "$option" in
          yes ) printf '%s\n' "$git_relative_path" >> "$git_ignore_file_relative"
                break;;
          no ) printf 'Skipping %s\n' "$git_relative_path" >&2
               break;;
          quit ) break 2;;
          * ) echo "Type a number.";;
      esac
   done
done
